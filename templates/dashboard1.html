
<head>
  <link rel="stylesheet" href="../static/style/dashboard.css?{% now "U" %}">
  <script src="https://kit.fontawesome.com/ddfdcacb4c.js" crossorigin="anonymous"></script>
  {% load bootstrap5 %}
  {% bootstrap_css %}
  {% bootstrap_javascript %}
  <script>
    
     // Add this script to handle drag and drop events
  document.addEventListener('DOMContentLoaded', function () {
    var dropArea = document.querySelector('.drag-and-drop');
    var input = document.getElementById('id_file');
    var output = document.getElementById('file-name');
    var uploadButton = document.querySelector('.upload-button');

    function showUploadButton() {
      uploadButton.style.display = 'block';
    }
    input.addEventListener('change', function() {
      updateFileName();
      showUploadButton();
    });
    // Prevent default drag behaviors
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(function (eventName) {
      dropArea.addEventListener(eventName, preventDefaults, false);
      document.body.addEventListener(eventName, preventDefaults, false);
    });

    // Highlight drop area when dragging over it
    ['dragenter', 'dragover'].forEach(function (eventName) {
      dropArea.addEventListener(eventName, highlight, false);
    });

    // Unhighlight drop area when dragging leaves it
    ['dragleave', 'drop'].forEach(function (eventName) {
      dropArea.addEventListener(eventName, unhighlight, false);
    });

    // Handle dropped files
    dropArea.addEventListener('drop', handleDrop, false);

    function preventDefaults(e) {
      e.preventDefault();
      e.stopPropagation();
    }

    function highlight() {
      dropArea.classList.add('active');
    }

    function unhighlight() {
      dropArea.classList.remove('active');
    }

    function handleDrop(e) {
      var dt = e.dataTransfer;
      var files = dt.files;

      // Handle the dropped files as needed (e.g., display file names)
      output.innerText = files[0].name;

      // Trigger the file input to handle the file
      input.files = files;
      updateFileName();
      showUploadButton();
    }

    // Add an event listener to the file input to trigger the updateFileName function
    
  });

    // Add this script to handle file selection and update the displayed file name
    function updateFileName() {
      var input = document.getElementById('id_file');
      var output = document.getElementById('file-name');
      output.innerText = input.files[0].name;
      
    }
  </script>
</head>
<body>
  <div class="dashboard_container">
    <div id="sidebar">
      <div class="top_icons">
          <div class="icon">
              <i class="fa-solid fa-plus"></i>
            </div>
            <div class="icon">
              <i class="fa-solid fa-upload"></i>
            </div>
            <div class="icon">
              <i class="fa-solid fa-magnifying-glass"></i>
            </div>
      </div>
      <div class="bot_icons">
          <div class="icon">
              <i class="fa-solid fa-user"></i>
            </div>
            <div class="icon">
              <i class="fa-regular fa-bell"></i>
            </div>
            <div class="icon">
              <i class="fa-solid fa-question"></i>
            </div>
            
      </div>
      
    </div>
    <div class="dashboard_content">
      <div class="content_container">
      <div class="scrollable_container">
      <div class="row">
        <div class="col-12 project_container">
          <div class="project_card">
              <div class="project_title">
                GoSnake
              </div>
              <div class="github">
                <i class="fa-brands fa-github"></i>
                <a href="#">ahmed-tabib/gosnake</a>
              </div>
              <div class="commit">
                <i class="fa-solid fa-code-commit"></i>
                <p>commit</p>
                <a href="#">5f68e2f3 </a>
                <p > scanned</p>
                <i class="fa-regular fa-circle-check"></i>
              </div>
              <div class="vuln">
                <i class="fa-solid fa-shield"></i>
                <h5 style="margin-left: 50px;">9</h5>
                <p>vulnerabilities found since first scan</p>
              </div>
              <div class="status">
                <h4>No Vulnerabilities Detected!</h4>
                <p>No action needed</p>
              </div>
              <div class="last_scan">
                <i class="fa-solid fa-location-crosshairs"></i>
                <p>last scanned Nov 23rd 2023</p>
              </div>
              <div class="project_btns">
                <button>Scan Now</button>
                <a href="#"><i class="fa-solid fa-gear" ></i></a>
              </div>
          </div>
          <div class="project_card">
              <div class="project_title">
                LILBET
              </div>
              <div class="github">
                <i class="fa-brands fa-github"></i>
                <a href="#">lilkandra/projects/lilbet</a>
              </div>
              <div class="commit">
                <i class="fa-solid fa-code-commit"></i>
                <p>commit</p>
                <a href="#">5e18f2e3 </a>
                <p > scanned</p>
                <i class="fa-regular fa-circle-check"></i>
              </div>
              <div class="vuln">
                <i class="fa-solid fa-shield"></i>
                <h5 style="margin-left: 50px;">0</h5>
                <p>vulnerabilities found since first scan</p>
              </div>
              <div class="status">
                <h4>No Vulnerabilities Detected!</h4>
                <p>No action needed</p>
              </div>
              <div class="last_scan">
                <i class="fa-solid fa-location-crosshairs"></i>
                <p>last scanned Oct 16th 2023</p>
              </div>
              <div class="project_btns">
                <button>Scan Now</button>
                <a href="#"><i class="fa-solid fa-gear" ></i></a>
              </div>
          </div>
          <div class="project_card">
              <div class="project_title">
                GoSnake
              </div>
              <div class="github">
                <i class="fa-brands fa-github"></i>
                <a href="#">ahmed-tabib/gosnake</a>
              </div>
              <div class="commit">
                <i class="fa-solid fa-code-commit"></i>
                <p>commit</p>
                <a href="#">5f68e2f3 </a>
                <p > scanned</p>
                <i class="fa-regular fa-circle-check"></i>
              </div>
              <div class="vuln">
                <i class="fa-solid fa-shield"></i>
                <h5 style="margin-left: 50px;">9</h5>
                <p>vulnerabilities found since first scan</p>
              </div>
              <div class="status">
                <h4>No Vulnerabilities Detected!</h4>
                <p>No action needed</p>
              </div>
              <div class="last_scan">
                <i class="fa-solid fa-location-crosshairs"></i>
                <p>last scanned Nov 23rd 2023</p>
              </div>
              <div class="project_btns">
                <button>Scan Now</button>
                <a href="#"><i class="fa-solid fa-gear" ></i></a>
              </div>
          </div>
          <div class="project_card">
              <div class="project_title">
                GoSnake
              </div>
              <div class="github">
                <i class="fa-brands fa-github"></i>
                <a href="#">ahmed-tabib/gosnake</a>
              </div>
              <div class="commit">
                <i class="fa-solid fa-code-commit"></i>
                <p>commit</p>
                <a href="#">5f68e2f3 </a>
                <p > scanned</p>
                <i class="fa-regular fa-circle-check"></i>
              </div>
              <div class="vuln">
                <i class="fa-solid fa-shield"></i>
                <h5 style="margin-left: 50px;">9</h5>
                <p>vulnerabilities found since first scan</p>
              </div>
              <div class="status">
                <h4>No Vulnerabilities Detected!</h4>
                <p>No action needed</p>
              </div>
              <div class="last_scan">
                <i class="fa-solid fa-location-crosshairs"></i>
                <p>last scanned Nov 23rd 2023</p>
              </div>
              <div class="project_btns">
                <button>Scan Now</button>
                <a href="#"><i class="fa-solid fa-gear" ></i></a>
              </div>
          </div>
          <div class="project_card">
            <div class="project_title">
              LILBET
            </div>
            <div class="github">
              <i class="fa-brands fa-github"></i>
              <a href="#">lilkandra/projects/lilbet</a>
            </div>
            <div class="commit">
              <i class="fa-solid fa-code-commit"></i>
              <p>commit</p>
              <a href="#">5e18f2e3 </a>
              <p > scanned</p>
              <i class="fa-regular fa-circle-check"></i>
            </div>
            <div class="vuln">
              <i class="fa-solid fa-shield"></i>
              <h5 style="margin-left: 50px;">0</h5>
              <p>vulnerabilities found since first scan</p>
            </div>
            <div class="status">
              <h4>No Vulnerabilities Detected!</h4>
              <p>No action needed</p>
            </div>
            <div class="last_scan">
              <i class="fa-solid fa-location-crosshairs"></i>
              <p>last scanned Oct 16th 2023</p>
            </div>
            <div class="project_btns">
              <button>Scan Now</button>
              <a href="#"><i class="fa-solid fa-gear" ></i></a>
            </div>
        </div>
        </div>
      </div>
      </div>
      </div>
      
  
      <!-- Add more project cards as needed -->
  
    </div>
  </div>
  </div>
  <div class="bottom_section">
    <div class="history_container">
      <div class="project_title">Scan History</div>
    </div>
    <div class="upload_container">
      <div class="add_project"><h5>Add Project</h5><i class="fa-brands fa-github"></i></div>
      
        <input placeholder="Repository link">
        <input placeholder="Token">
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal1">
          Add Project
        </button>
        
        <!-- Modal -->
        <div class="modal fade" id="exampleModal1" tabindex="-1" aria-labelledby="exampleModalLabel1" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title1" id="exampleModalLabel1">Project Added</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body1">
                Project added successfully 
              </div>
              <div class="modal-footer">
                
                
              </div>
            </div>
          </div>
        </div>
        <div class="upload_src"><h5>Upload Source Code</h5><i class="fa-solid fa-upload"></i></div>
        <div class="dd_browse">
          <div>Drag & Drop Here</div>
          <div>or</div>
          <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <label class="your-cool-css-class">
              <div class="browse_btn">Browse</div>
                {{ form.file }}
                
            </label>
            <div id="file-name"></div>         
          
        </div>
        <button   type="button" id="scan_btn" class="upload-button" data-bs-toggle="modal" data-bs-target="#exampleModal" >Scan</button>
        
      </form>
    </div>
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Scan Result</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            ...
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    // Add an event listener to the file input to trigger the updateFileName function
    document.getElementById('id_file').addEventListener('change', updateFileName);
  </script>
</body>

